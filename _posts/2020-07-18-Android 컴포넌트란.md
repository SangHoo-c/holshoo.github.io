---
title: Android 컴포넌트란? 
tags: Android 
---
 
안드로이드 앱 아키택처의 특징은 컴포넌트 기반이라는 것이다. 한마디로 안드로이드 앱을 개발한다는 것은 컴포넌트를 작성한다는 것입니다. 그렇다면 컴포넌트가 무엇이고 어떤 역할을 하는지 이 포스트에서 알아보려고 합니다.

![Android_4_component]](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile10.uf.tistory.com%2Fimage%2F9999BC485B471F6918766E)

컴포넌트는 앱의 구성단위이며, 컴포넌트 여러 개를 조합하여 하나의 앱을 만듭니다. 개발을 조금 해보면 Activity와 Service 등 모두 물리적으로 클래스의 모습입니다. 하지만 일반 사용자가 정의한 클래스와 차이가 있습니다. 안드로이드에서 클래스는 컴포넌트와 일반 클래스로 나뉘는데, 일반 클래스의 생명주기는 개발자가 코드로 관리하지만 컴포넌트는 안드로이드 시스템이 생성하여 관리하다가 소멸한다는 차이점이 있습니다. 


## 안드로이드 컴포넌트 특징

**컴포넌트는 앱 내에서 독립적인 실행 단위입니다.**

따라서 개발자가 코드로 생성해서 실행할 수 있습니다. 즉 B클래스에서 A클래스를 실행할 때, A a = new A(); 같은 구문으로 객체를 생성해서 실행하는 대신, Intent 라는 것을 매개로 하여 결합하지 않은 상태에서 독립적으로 실행가능 합니다. 

**main 함수 같은 애플리케이션의 진입 지점이 따로 없습니다.** 

다시 말하자면 안드로이드에는 main의 개념이 따로 존재하지 않습니다. 즉 앱의 수행시점은 다양할 수 있다는 것입니다. 카카오톡으로 예를 들자면, 사용자가 앱을 실행하면 목록 컴포넌트가 실행되고, 메시지가 수신되면 수신 컴포넌트부터 시작된다는 것입니다. 

**애플리케이션 라이브러리 개념이 있습니다.** 

즉, A 어플리케이션에서 B 어플리케이션을 불러와 사용할 수 있는 기능이 있습니다. 따라서 개발자의 관점으로 보면 안드로이드 스마트폰의 다른 앱들을 라이브러리로 생각할 수 있습니다. 

이러한 특징을 갖는 안드로이드의 4대 컴포넌트는 Activity, Service, Content Provider, Broadcast Receiver 이렇게 4가지를 말한다. 하나씩 차례로 알아보겠습니다. 

1. ## Activity 

액티비티는 사용자가 애플리케이션과 상호작용하는 단일화면을 의미하며 모든 안드로이드 애플리케이션은 액티비티로 구성되어 있습니다. 즉, 사용자와 상호작용을 담당하는 인터페이스라고 할 수 있습니다. 액티비티는 생명주기(life cycle) 관련 메서드들을 재정의하여 원하는 기능을 구현할 수 있습니다. (각 컴포넌트의 생명주기 관련 포스팅도 곧 작성할 예정입니다.)

- Intent를 통해 다른 애플리케이션의 액티비티를 호출할 수 있습니다. 
- 애플리케이션에는 하나 이상의 액티비티가 있어야 하고, 한 화면에 하나의 액티비티를 display 할 수 있습니다. 
- 액티비티 내에 fragment를 추가하여 화면을 분할시킬 수 있습니다. 
- 1개 이상의 View 또는 ViewGroup을 포함합니다. 


2. ## Service

서비스는 사용자와 직접적으로 상호작용하는 요소는 아닙니다. 흔히 백그라운드에서 어떠한 작업을 처리하기 위해 서비스를 사용하는데, 유튜브 또는 멜론과 같이 스트리밍 앱을 사용할 때 서비스를 주로 사용합니다. 서비스와 같은 경우 사용자의 인터페이스를 방해하지 않고 눈에 보이지 않는 곳에서 작업을 처리하기 때문에 별도의 스레드에서 동작한다고 생각할 수도 있지만, 메인 스레드(UI thread)에 할당되기 때문에, 서비스가 많은 일을 해야하는 경우 UI 업데이트를 하지 못하고 ANR이 발동되어 프로세스(프로세스란? 실행중인 프로그램을 말한다.)를 강제로 멈춰버릴 수도 있으니, 별도의 스레드를 할당해서 사용하도록 합니다. 

- 네트워크와 연동이 가능합니다,
- 별도의 UI를 가지지 않으며 백그라운드에서 수행됩니다. 
- 액티비티와 서비스는 UI스레드라고 불리는 동일한 애플리케이션 스레드로 실행됩니다.
- 애플리케이션이 종료되어도 이미 시작이 된 서비스는 백그라운드에서 계속 동작합니다. 

3. ## Broadcast Receiver

방송 수신자는 안드로이드 OS로부터 발생하는 각종 이벤트와 정보를 받기위해 작성하는 컴포넌트입니다. 사용자 안드로이드 디바이스의 시스템 부팅 시 앱 초기화, 네트워크 끊김 등 특수한 이벤트에 대한 처리나 배터리 부족 알림, 문자 수신과 같은 정보를 받아 처리를 해야 할 필요가 있을 때 동작합니다. 즉, 안드로이드 OS에서 메시지가 오면 모든 앱에 “메시지가 왔다”라는 하나의 정보를 방송합니다. 이 메시지를 받기 위해 브로드캐스트 리시버를 구현하면 해당 정보가 왔을 때 특정 이벤트를 처리할 수 있습니다. 

- 거의 대부분 UI를 가지지 않습니다. 
- 안드로이드 디바이스 특수한 상황에 대응하기 위해 사용됩니다. 
- 특정한 상황을 제외하고는 브로드캐스트는 시스템에서 시작합니다. 

4. ## Content Provider 

콘텐츠 제공자는 데이터를 관리하고 다른 애플리케이션의 데이터를 제공하는데 사용되는 컴포넌트입니다. 예를 들어 개발자가 만든 앱에서 다른 앱의 데이터가 필요할 때 필요합니다. 특정한 애플리케이션이 사용하고 있는 DB를 공유하기 위해 사용하며 애플리케이션 간의 데이터 공유를 위해 표준화된 인터페이스를 제공합니다. 

- SQLite DB / Web / 파일 입출력 등을 통해서 데이터를 관리합니다. 
- 외부 애플리케이션이 현재 실행 중인 애플리케이션 내에 있는 DB에 함부로 접근하지 못하게 할 수 있으면서 나 자신이 공개하고 공유하고 싶은 데이터만 공유할 수 있도록 도와줍니다. 
- 작은 데이터들은 intent로 애플리케이션끼리 데이터를 서로 공유가 가능하지만, 음악, 사진 등 용량이 큰 데이터의 경우는 콘텐츠프로바이더를 사용합니다. 
- 콘텐츠프로바이더는 데이터의 읽기, 쓰기 권한이 있어야 애플리케이션에 접근이 가능합니다. 
- DB에서 사용되는 CRUD(create, read, update, delete) 원칙을 준수합니다. 



어플리케이션은 사실상 이 4가지요소로 구성된다. 각 요소들은 Intent를 통해서 상호 통신을 합니다. 

## 결론 



그동안 개발을 하며 기초적인 컴포넌트에 대한 이해도 없이 필요한 내용만 찾아서 사용했던 것 같습니다. 조금 더 원리를 알고 이해하며 개발하는 사람이 되려고 합니다. 이어지는 포스트에서는 lifecycle, Intent와 context 등 조금 더 자세한 내용을 정리해보겠습니다.







![3 circles](https://dv-website.s3.amazonaws.com/uploads/2018/10/110818-pic1.png)

중국이 AI의 강자로 떠오르고 있다는 사실을 아는가? 그 이유는 공산화된 사회에 정부주도적으로 데이터 수집을 하기 때문에 그만큼 학습성능이 높은 AI의 생산이 가능하기 때문이다. 이처럼 바로 데이터 수집, 즉 처리의 목적은 AI의 성능향상, 학습에 있기 때문이다. 따라서 많은 양의 데이터, 그것도 무질서하게 나열된 dummy 데이터가 아닌, 구조화된, 최소한 일정한 모양으로 전처리된 데이터의 필요성은 갈수록 높아지고 있다. 


이제 빅데이터와 AI가 서로에게 필수불가결한 요소라는 것을 알 수 있다. 
이 리포트에서는 빅데이터 처리 방법 중에 하나인, Spark RDD를 통해서 컴퓨터가 어떻게 데이터를 처리하는지 알아보려고 한다. 


우선 구체적인 Spark에 대한 설명전에, 주된 빅데이터 처리 방법인 Map Reduce에 대하여 알아보자. 



## Map Reduce란?

대용량 데이터 처리를 위한 분산 프로그래밍 모델이다. 조금 구체적으로 표현하자면, 흩어져 있는 데이터를 수직화하여, 그 데이터를 각각의 종류 별로 모으고(Map), 필터링과 정렬을 거쳐 데이터를 뽑아내는(Reduce)하는 작업인데 이를 여러 저장공간으로부터 데이터를 한 번에 읽는 작업(분산 프로그래밍)을 통해 수행한다.  


## Hadoop? Spark? 



![spark frame](https://spark.apache.org/images/spark-stack.png)


빅데이터 처리방법의 주된 기능인 Map Reduce는 ‘하둡’과 ‘스파크’, 모두 제공한다. 먼저 개발된 기술인 하둡은 기본적으로 HDFS(Hadoop Distributed File System)이라고 불리는 분산저장시스템과 map reduce를 통해 데이터 처리를 했지만 문제는 디스크의 input/output을 사용하기 때문에 속도의 한계가 있었다. HW가격이 내려가자, 굳이 HDFS(디스크)대신 메모리를 사용하여 더 빠른 속도로, 병렬처리가 가능하며 머신러닝까지 가능한 스파크가 등장하게 되었다. 


## Spark RDD란?

Resilient, Distributed, Dataset의 약자이며, R- 데이터 손실 문제 발생 시 다시 생성할 수 있는 유실된 파티션을 재연산하여 복구하는 기능, D- 메모리를 이용하여 분산처리를 한다. D-파일을 통해 가져올 수 잇는 데이터셋 제공한다 라는 의미이다. 따라서 Spark에서 제공하는 RDD는 Spark에서 기본적인 데이터 단위라고 볼 수 있다. RDD는 두가지 작업이 가능하다. 첫째, 다양한 source 데이터를 RDD 형태로 변환시켜주는 Transformation, 둘째 RDD값을 기반으로 무엇인가를 계산하는 Action이 가능하다. 실제 코드를 잠깐 보자.


아래 코드는 data.txt에서 파일을 읽고 RDD형태로 Transformation 하는 코드이다. 

```python
lines = sc.textFile(“data.txt”)
pairs = lines.map(lamda s : (s, 1))
counts = pairs.reduceByKey( lambda a, b: a +b)
```

아래 코드는 RDD값을 기반으로 Action을 수행하는 코드이다. 


```python
counts.collect()
#RDD의 모든 데이터 리턴
counts.countByValue()
#각 값의 개수만큼 리턴 
```

이와 같은 방법으로 Spark RDD를 통해 분산 프로그래밍이 가능하다. 


## 결론

빅데이터는 AI시대를 살고 있는 우리에게 필수적인 존재이다. 따라서 처리의 목적과 과정을 알고 공부를 하는 것이 효과적이다. 다양한 방법이 존재하지만, 이 시간 Spark에 관하여 알아보았으며 이를 통해 효율적인 분산 프로그래밍이 가능함을 알게 되었으며 더 많은 양의 데이터를 인메모리 형식으로 짧은 시간안에 처린 가능하고, 내부적으로 지원하는 머신러닝 라이브러리를 통해 AI를 학습시킬 수 있음을 알게 되었다. 
